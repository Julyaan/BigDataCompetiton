<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>竞赛</title>
	<style type="text/css">
	body{ background:#EEEEEE;margin:0; padding:0; font-family:"微软雅黑", Arial, Helvetica, sans-serif; }
	.top{ margin:5px auto; color:#990000; text-align:center;}
	.info1{ margin:0; text-align:center;}
	.info1{ background:#;margin:5px; text-align:center;}
	.info3{padding-right:90px;padding-left:90px;text-align:left;}
	p{font-size:14px;}
	.bottom{ text-align:right; font-size:12px; color:#CCCCCC; width:1000px;}
	</style>
	 <script src="jquery.min.js"></script>
	 <script src="echarts.min.js"></script>
	 <script src="data.js"></script>

</head>
<body>
	<div class="top">
		<h1> 无锡市政府服务大数据可视化分析</h1>
	</div>
	<div class="info1">
		<div id="chart_2" style="width: 100%; height: 700px"></div>
		<div class="info3">
			<p><b>图表说明：</b>横坐标表示部门，纵坐标表示服务类别。每个值表示对应部门在对应服务领域内发布文件的总下载次数。颜色的深浅体现出下载次数的多少。</p>
			<p><b>图表分析：</b>通过颜色的深浅直观地看出市民比较关注的部门和服务。并且通过调节图表正上方的视觉映射组件的阈值可以对部门和服务按照受关注程序进行筛选。</p>
			<p><b>所得结论：</b>根据数据，最受关注的部门是轨道办，最受关注的服务是轨道办部门的日常生活服务，该服务中无锡地铁纪念票卡发行信息，无锡地铁社会志愿者招聘信息、无锡地铁招标信息等文件的下载次数均超过了7000，而轨道办部门下的无锡地铁商业开发信息的下载次数在网站中最高，达到了8448次。表明无锡市民近期非常关注无锡地铁的开发信息，政府可以相应地公开更多地铁开发方面的信息和资料。另一方面也可以给我们提供更详细的地铁开发相关素材，我们可以进一步分析该现象出现的原因和趋势。</p>
		</div>
	</div>
	<div class="info1"  style="background:#333;color:#ddd;padding-bottom:20px">
		<div id="chart_3" style="width: 100%; height: 800px"></div>
		<div class="info3">
			<p><b style="color:#fff">图表说明：</b>第一列表示分布日期，第二列表示服务类别，第三列表示文件下载数，第4列表示文件大小，默认展示了37个部门的文件部分信息，可以点击上方按钮单独或批量观察某些部门。每一个纵轴可以拖拽生成<b>分布区间滚动条</b>，通过联合生成多个滚动条，我们可以在自定义的多个属性特定范围组合内观察数据</p>
			<p><b style="color:#fff">特点分析：</b>平行坐标图是一种通常的可视化方法， 用于对高维几何和多元数据的可视化。为了表示在高维空间的一个点集，在N条平行的线的背景下，（一般这N条线都竖直且等距），一个在高维空间的点被表示为一条拐点在N条平行坐标轴的折线，在第K个坐标轴上的位置就表示这个点在第K个维的值。
平行坐标图是信息可视化的一种重要技术。为了克服传统的笛卡尔直角坐标系容易耗尽空间、 难以表达三维以上数据的问题， 平行坐标图将高维数据的各个变量用一系列相互平行的坐标轴表示， 变量值对应轴上位置。为了反映变化趋势和各个变量间相互关系，往往将描述不同变量的各点连接成折线。所以平行坐标图的实质是将 维欧式空间的一个点Xi(xi1,xi2,...,xim) 映射到 维平面上的一条曲线。
通过点击下方带颜色的bar，可以对筛选出要展示的部门。我们利用相关算法对大量的政府文件发布记录进行处理和提炼，最终生成[日期，部门，服务，点击次数，文件大小]共5个维度的结构化数据，该图将服务与发布日期、点击数、文件大小连接起来，将这5维数据显示在一个平面里。</p>
			<p><b style="color:#fff">所得结论：</b>通过观察上图，我们可以很容易地得出民众对政府政策的关注领域和对不同服务的需求度，通过一定的分析和总结，我们可以得出很多有用的结论辅助政府改善和调整工作架构，帮助民众分析政策动向，比如：轨道办的文件下载量普遍较高；企业服务类文件下载量比较高，可以看出企业更关注政府的政策；生活服务类文件在时间分布上比较均匀，而房屋住宅类则集中某些时间段；所有部门发布的文件大小与下载总数成反比，反映出民众浏览政府文件的阅读习惯；通过观察前两个纵轴，我们能够推断出特定服务领域政策的发布规律
		</div>
	</div>
	<div class="info1">
		<b>政府政策-服务项目环形关系图</b>
		<div id="chart_4" style="width: 100%; height: 750px"></div>
		<div class="info3">
			<p><b>图表说明：</b>每个点表示部门或服务，大小表示文件（政策）资料数量。第一类：部门。第二类：服务。第三类：子服务。通过鼠标滚轮可以进行缩放和拖拽等操作</p>
			<p><b>图表分析：</b>通过关系图可以看出来每个部门提供的服务种类，方便市民宏观地掌握政府提供的各类资源所处的位置及资源文件的总大小，帮助市民快速获取到想找的文件的入口。我们将政府每条发布文件的记录映射到图中的每个连线上，通过特定算法将这些记录进行统计和处理，生成[部门、服务类别、子类别、文件大小]这样的4维数据，然后映射到图中。
	如果只想看政府部门和服务类别的关系，点击bar里面的子服务类别就可以把子服务类别和它所有关联的关系线隐去。每个圆点的大小代表了该部门或服务下公开资源的文件总大小。</p>
		</div>
	</div>
	<div class="info1" style="background:#404a59;color:#fff;padding-left:50px;padding-right:50px">
		<div id="chart_5" style="width: 100%; height: 700px;align:center"></div>
		<div class="info3">
			<p><b>图表说明：</b>该图横坐标表示时间，纵坐标表示服务类别，散点的颜色代表不同的部门，可以通过上方工具栏切换，散点的大小表示【部门-服务】领域内所有文件的浏览次数，另外，我们利用视觉映射组件将每类文件的大小映射成每个散点的颜色透明度</p>
			<p><b>图表分析：</b>通过调整右方组件和上方部门数，我们可以一些政府文件的发布规律和特点，如：相比前两年，政府文件更集中关注于教育科研和企业服务这两大类</p>
		</div>
	</div>
	<script type="text/javascript">
	//app.title = '笛卡尔坐标系上的热力图';
	var myChart = echarts.init(document.getElementById('chart_2'));
	myChart.showLoading();
	var data =data1;
	
		myChart.hideLoading();
		option = {
		  title: {
        text: '部门-服务文件发布热力图',
        subtext: '',
        left: 'center',
        textStyle: {
            color: '#990000'
        },
		top:0,
    },
		tooltip: {
			position: 'top'
		},
		animation: false,
		grid: {
			height: '85%',
			//y: '10%',
			top:60,
			
		},
		    toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
		xAxis: {
			type: 'category',
			data: department,
			name:'部门',
			splitArea: {
				show: true
			},
			axisLabel:{
				interval:0,
				rotate: 30,
			}
		},
		yAxis: {
			type: 'category',
			data: category,
			splitArea: {
				show: true
			},
			name:'服务类别',
			
		},
		visualMap: {
			min: 0,
			max: 1000,
			calculable: true,
			orient: 'horizontal',
			left: 'center',
			top: 30,
		},
		series: [{
			name: '文件下载总量',
			type: 'heatmap',
			data: data,
			label: {
				normal: {
					show: true
				}
			},
			itemStyle: {
				emphasis: {
					shadowBlur: 10,
					shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};
	 myChart.setOption(option);
		
	

	
	</script>
	<script type="text/javascript">
	 
var schema = [
    {name: 'date', index: 0, text: '日期'},
    {name: 'categories', index: 1, text: '服务类别'},
    {name: 'click', index: 2, text: '下载量'},
    {name: 'size', index: 3, text: '文件大小'},
];


var myChart = echarts.init(document.getElementById('chart_3'));
option = {
    backgroundColor: '#333',
    legend: {
        top: 50,
        data: department,
        itemGap: 15,
		left:100,
		right:100,
        textStyle: {
            color: '#fff',
            fontSize: 14
        },
		itemWidth:16,
    },
	    toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
	 title: {
        text: '民众政策关注度平行坐标图',
        subtext: '',
        left: 'center',
        textStyle: {
            color: '#fff'
        },
		top:10,
    },
    tooltip: {
        padding: 30,
        backgroundColor: '#222',
        borderColor: '#777',
        borderWidth: 1,
        formatter: function (obj) {
            var value = obj[0].value;
            return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'
                + obj[0].seriesName + ' ' + value[0] + '日期：'
                + value[7]
                + '</div>'
                + schema[1].text + '：' + value[1] + '<br>'
                + schema[2].text + '：' + value[2] + '<br>'
                + schema[3].text + '：' + value[3] + '<br>';
        }
    },
 
    parallelAxis: [
        {dim: 0, name: schema[0].text,type:'category',data:date_parallel,inverse:true,nameLocation:"start"},
		{dim: 1, name: schema[1].text,type: 'category', data: category_parallel},
        {dim: 2, name: schema[2].text},
        {dim: 3, name: schema[3].text},

    ],
    visualMap: {
        show: true,
        min: 0,
        max: 150,
        dimension: 2,
		bottom:30,
		left:10,
        inRange: {
            color: ['#d94e5d','#eac736','#50a3ba'].reverse(),
            // colorAlpha: [0, 1]
        }
    },
    parallel: {
        left: '5%',
        right: '5%',
		top:230,
        bottom: 50,
        parallelAxisDefault: {
            type: 'value',
            name: 'AQI指数',
            nameLocation: 'end',
            nameGap: 20,
            nameTextStyle: {
                color: '#fff',
                fontSize: 12
            },
            axisLine: {
                lineStyle: {
                    color: '#aaa'
                }
            },
            axisTick: {
                lineStyle: {
                    color: '#777'
                }
            },
            splitLine: {
                show: false
            },
            axisLabel: {
                textStyle: {
                    color: '#fff'
                }
            }
        }
    },
    series: serise_parallel,
};
 myChart.setOption(option);
	</script>
	<script type="text/javascript">
	var myChart = echarts.init(document.getElementById('chart_4'));

   
	
    //var graph = echarts.dataTool.gexf.parse(xml);
    var categories = [];
	categories[0]={name:'政府部门'};
	categories[1]={name:'服务类别'};
	categories[2]={name:'子服务类别'};
	
	nodes.forEach(function (node) {
        node.itemStyle = null;
        node.symbolSize = node.value;
        node.symbolSize = node.symbolSize/10+7;
        node.label = {
            normal: {
                show: node.symbolSize>7.8
            }
        };
    });

    option = {

		    toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
        tooltip: {},
        legend: [{
            // selectedMode: 'single',
            data: categories.map(function (a) {
                return a.name;
            })
        }],
        animationDurationUpdate: 1500,
        animationEasingUpdate: 'quinticInOut',
        series : [
            {
                name: '文件资源总大小',
                type: 'graph',
                layout: 'circular',
                circular: {
                    rotateLabel: true
                },
                data: nodes,
                links: links,
				categories: categories,
                roam: true,
                label: {
                    normal: {
                        position: 'right',
                        formatter: '{b}'
                    }
                },
                lineStyle: {
                    normal: {
                        color: 'source',
                        curveness: 0.3
                    }
                }
            }
        ]
    };

    myChart.setOption(option);

	</script>
<script type="text/javascript">
  var myChart = echarts.init(document.getElementById('chart_5'));
var schema = [
    {name: 'date', index: 0, text: '日期'},
    {name: 'categories', index: 1, text: '服务类别'},
    {name: 'click', index: 2, text: '浏览总次数'},
    {name: 'size', index: 3, text: '文件总大小'}
];


option = {
    backgroundColor: '#404a59',
     title: {
        text: '各个部门文件发布状况散点图',
        subtext: '',
        left: 'center',
        textStyle: {
            color: '#fff'
        },
		top:10,
    },
	    toolbox: {
        feature: {
            dataView: {show: true, readOnly: false},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
    legend: {
        y: 'top',
		top:40,
		padding:30,
		left:110,
		right:110,
        data: department,
        textStyle: {
            color: '#fff',
            fontSize: 16
        }
    },
    grid: {
        x: '10%',
        x2: '10%',
		top:200,
        y: '18%',
        y2: '10%'
    },
    tooltip: {
        padding: 10,
        backgroundColor: '#222',
        borderColor: '#777',
        borderWidth: 1,
        formatter: function (obj) {
            var value = obj.value;
            return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'
              //  + obj.name + ' ' + value[0] 
                + '</div>'
                + schema[1].text + '：' + value[1] + '<br>'
                + schema[2].text + '：' + value[2] + '<br>'
                + schema[3].text + '：' + value[3] + '<br>';
        }
    },
    xAxis: {
        type: 'time',
        name: '日期',
        //nameGap: 16,
        nameTextStyle: {
            color: '#fff',
            fontSize: 14
        },
		boundaryGap:['10%','10%'],
        splitLine: {
            show: false
        },
        axisLine: {
			show:true,
            lineStyle: {
                color: '#eee'
            }
        },
	
    },
    yAxis: {
        type: 'category',
        name: '服务类别',
		data: category_parallel,
        nameLocation: 'end',
        nameGap: 20,
        nameTextStyle: {
            color: '#fff',
            fontSize: 16
        },
        axisLine: {
            lineStyle: {
                color: '#eee'
            }
        },
        splitLine: {
            show: false
        }
    },
    visualMap: [
        {
            left: 'right',
            top: '10%',
            dimension: 2,
            min: 0,
            max: 1000,
            itemWidth: 30,
            itemHeight: 120,
            calculable: true,
            //precision: 1,
            text: ['圆形大小：浏览次数'],
            textGap: 30,
            textStyle: {
                color: '#fff'
            },
            inRange: {
                symbolSize: [10, 70]
            },
            outOfRange: {
                symbolSize: [10, 70],
                color: ['rgba(255,255,255,.2)']
            },
            controller: {
                inRange: {
                    color: ['#c23531']
                },
                outOfRange: {
                    color: ['#444']
                }
            }
        },
    {
            left: 'right',
            bottom: '5%',
            dimension: 3,
            min: 0,
            max: 500,
            itemHeight: 120,
            calculable: true,
            precision: 1,
            text: ['明暗：下载次数'],
            textGap: 30,
            textStyle: {
                color: '#fff'
            },
            inRange: {
                colorLightness: [0.5,1]
            },
            outOfRange: {
                color: ['rgba(255,255,255,.2)']
            },
            controller: {
                inRange: {
                    color: ['#c23531']
                },
                outOfRange: {
                    color: ['#444']
                }
            }
        }
    ],
    series: serise_scatter,
};
 myChart.setOption(option);
</script>
</body>
</html>